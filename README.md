# LOF æº¢ä»·ç›‘æ§æœåŠ¡

ä¸€ä¸ªç”¨äºç›‘æ§ LOF åŸºé‡‘æº¢ä»·ç‡çš„æœåŠ¡ç«¯ç¨‹åºï¼Œä¸ºå¾®ä¿¡å°ç¨‹åºæä¾›æ•°æ®æ¥å£ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ”„ **è‡ªåŠ¨æŠ“å–**ï¼šå®šæ—¶ä»é›†æ€å½•æŠ“å– LOF å¥—åˆ©æ•°æ®
- ğŸ“Š **æº¢ä»·ç­›é€‰**ï¼šé»˜è®¤ç­›é€‰æº¢ä»·ç‡ â‰¥ 3% çš„åŸºé‡‘ï¼Œæ”¯æŒè‡ªå®šä¹‰é˜ˆå€¼
- ğŸ” **æ¥å£è®¤è¯**ï¼šToken è®¤è¯æœºåˆ¶ï¼Œä¿æŠ¤ API å®‰å…¨
- â° **æ™ºèƒ½è°ƒåº¦**ï¼š7:00-24:00 éšæœºé—´éš”ï¼ˆçº¦ 1 å°æ—¶ï¼‰æŠ“å–ï¼Œé¿å…è§¦å‘é™åˆ¶
- ğŸ³ **å®¹å™¨åŒ–éƒ¨ç½²**ï¼šDocker Compose ä¸€é”®éƒ¨ç½²

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Docker 20.10+
- Docker Compose 2.0+

### éƒ¨ç½²æ­¥éª¤

1. å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/zhsh2980/LOFPremiumMonitor.git
cd LOFPremiumMonitor
```

2. é…ç½®ç¯å¢ƒå˜é‡
```bash
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥å¿…è¦çš„é…ç½®
```

3. å¯åŠ¨æœåŠ¡
```bash
docker compose up -d
```

4. æ£€æŸ¥æœåŠ¡çŠ¶æ€
```bash
docker compose ps
```

## API æ¥å£

### è·å–æº¢ä»·æ•°æ®

```
GET /api/lof/list
```

**è¯·æ±‚å¤´**
```
Authorization: Bearer <YOUR_TOKEN>
```

**æŸ¥è¯¢å‚æ•°**
| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| min_premium | float | 3.0 | æœ€å°æº¢ä»·ç‡ï¼ˆ%ï¼‰ |
| status | string | all | ç”³è´­çŠ¶æ€ï¼šall/limited/open/suspended |

**å“åº”ç¤ºä¾‹**
```json
{
  "code": 0,
  "message": "success",
  "data": {
    "update_time": "2026-02-01T15:30:00",
    "count": 10,
    "items": [
      {
        "fund_code": "161725",
        "fund_name": "æ‹›å•†ä¸­è¯ç™½é…’æŒ‡æ•°(LOF)A",
        "price": 1.234,
        "nav": 1.200,
        "premium_rate": 2.83,
        "volume": 12345678,
        "apply_status": "limited"
      }
    ]
  }
}
```

### è·å–å…¨éƒ¨æ•°æ®

```
GET /api/lof/all
```

è¿”å›æ‰€æœ‰ LOF æ•°æ®ï¼Œä¸åšæº¢ä»·ç‡ç­›é€‰ã€‚

### è·å–æœåŠ¡çŠ¶æ€

```
GET /api/status
```

è¿”å›æœ€åæ›´æ–°æ—¶é—´å’ŒæœåŠ¡çŠ¶æ€ã€‚

## ç¯å¢ƒå˜é‡

| å˜é‡å | å¿…å¡« | è¯´æ˜ |
|--------|------|------|
| JISILU_USERNAME | âœ… | é›†æ€å½•è´¦å· |
| JISILU_PASSWORD | âœ… | é›†æ€å½•å¯†ç  |
| API_TOKEN | âœ… | API è®¿é—®ä»¤ç‰Œ |
| DATABASE_URL | âœ… | PostgreSQL è¿æ¥å­—ç¬¦ä¸² |
| TZ | âŒ | æ—¶åŒºï¼Œé»˜è®¤ Asia/Shanghai |

## é¡¹ç›®ç»“æ„

```
LOFPremiumMonitor/
â”œâ”€â”€ app/                    # åº”ç”¨ä»£ç 
â”‚   â”œâ”€â”€ main.py            # FastAPI å…¥å£
â”‚   â”œâ”€â”€ config.py          # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ models.py          # æ•°æ®åº“æ¨¡å‹
â”‚   â”œâ”€â”€ database.py        # æ•°æ®åº“è¿æ¥
â”‚   â”œâ”€â”€ scraper.py         # é›†æ€å½•æŠ“å–
â”‚   â”œâ”€â”€ scheduler.py       # å®šæ—¶ä»»åŠ¡
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ endpoints.py   # API æ¥å£
â”œâ”€â”€ docs/                   # æ–‡æ¡£
â”‚   â”œâ”€â”€ design.md          # è®¾è®¡æ–‡æ¡£
â”‚   â””â”€â”€ deployment.md      # éƒ¨ç½²æ–‡æ¡£
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ .env.example
â”œâ”€â”€ .gitignore
â””â”€â”€ README.md
```

## æ–‡æ¡£

- [è®¾è®¡æ–‡æ¡£](docs/design.md) - ç³»ç»Ÿæ¶æ„ã€æŠ€æœ¯é€‰å‹ã€æ•°æ®åº“è®¾è®¡
- [éƒ¨ç½²æ–‡æ¡£](docs/deployment.md) - æœåŠ¡å™¨éƒ¨ç½²ã€CI/CD é…ç½®

## License

MIT License
